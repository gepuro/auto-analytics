# Auto Analytics AIエージェント要件定義書

## 1. システム概要

- **名称**: Auto Analytics（オートアナリティクス）
- **目的**: データ分析の民主化を実現し、専門知識の有無に関わらず全社員がデータから洞察を得られるようにする
- **ビジョン**: 自然言語での対話を通じて、誰もが簡単にデータ分析を実行できる環境を提供

## 2. 機能要件

### 2.1 コア機能

#### 1. 自然言語理解
- ユーザーの分析要求を理解（Google gemini 2.5 flash活用）
- 曖昧な質問の明確化
- 文脈を考慮した対話の継続
- 多言語対応（日本語・英語）

#### 2. データ分析実行
- SQLクエリの自動生成・実行（Gemini 2.5 flashによる最適化）
- Pythonコードによる高度なデータ処理
- 結果の解釈と洞察の提供（gemini 2.5 flash活用）
- MCPサーバー経由でのデータベース接続

#### 3. レポート生成
- 分析結果の自動レポート化（Gemini 2.5 flashによる文章生成）
- 視覚化（グラフ・チャート）の生成
- 洞察の要約とアクションアイテムの提案（Gemini 2.5 flas活用）

### 2.2 サポート機能
- 関連データ・ドキュメントの提案（gemini 2.5 flash推論活用）
- 仮説生成と検証プロセスの支援（gemini 2.5 flash活用）

## 3. 非機能要件

### 3.1 技術基盤
- **AIフレームワーク**: Google Agent Development Kit (ADK) - https://google.github.io/adk-docs/
- **AIモデル**: Google gemini 2.5 flash（エージェント実装用）
- **データベース接続**: MCPサーバー経由（https://github.com/googleapis/genai-toolbox）
- **ユーザーインターフェース**: ADKライブラリを使用した開発用のWebインターフェース

### 3.2 アーキテクチャ
- マルチエージェントシステム構成
- 専門性を持つサブエージェントの協調動作
- 非決定論的アプローチによる柔軟な問題解決
- MCPサーバーアーキテクチャによるデータアクセス層の分離
- Webベースのユーザーインターフェース

### 3.3 AIモデル要件（gemini 2.5 flash）
- **モデル仕様**: Google gemini 2.5 flash（最新版）
- **API統合**: Google AI Studio / Vertex AI経由でのアクセス
- **プロンプトエンジニアリング**: 各エージェント専用のプロンプトテンプレート
- **コンテキスト管理**: 長期対話に対応するコンテキスト保持
- **レスポンス最適化**: 構造化出力（JSON、SQL等）の確実な生成
- **セーフティ機能**: 不適切なクエリの検出・フィルタリング
- **多言語対応**: 日本語・英語の双方向対応

### 3.4 性能・品質要件
- 探索的分析への対応
- ユーザーフィードバックによる継続的改善
- gemini 2.5 flash API応答時間の最適化（3秒以内）
- プロンプト効率化による API使用量の最適化

## 4. 開発方針

### 4.1 段階的アプローチ

#### Phase 1: 環境構築
- ADKによる最小構成のエージェントを開発
- エンドツーエンドの動作検証

#### Phase 2: MVP開発
- PostgreSQLをMCPサーバー化
- 狭いスコープでのPoC実装
- 「自然言語→SQL→分析」の基本フロー確立
- gemini 2.5 flash APIの統合とエージェント実装

#### Phase 3: 機能拡張
- 高度な分析機能の追加
- ユーザビリティの向上

#### Phase 4: レポーティング
- HTMLによる分析レポートの作成
- レポートの表示機能


## 5. 制約事項
- 内部利用に限定（外部公開なし）
- 既存のデータガバナンスポリシーの遵守
- ADKライブラリの制約事項に準拠
- MCPサーバーのセキュリティ要件を満たす
- Google gemini 2.5 flash APIの利用規約・レート制限に準拠
- gemini 2.5 flash APIキーとアクセス権限の適切な管理
- 機密データのGemini API送信時の安全性確保

## 6. 成功指標
- データ分析にかかる時間の短縮
- 分析実施者の裾野拡大（非技術職の利用率）
- 意思決定スピードの向上
- データ活用文化の浸透度
- gemini 2.5 flash応答の正確性（SQL生成精度95%以上）
- 自然言語理解の精度（ユーザー意図把握率90%以上）
- API レスポンス時間（3秒以内での応答率95%以上）